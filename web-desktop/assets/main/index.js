System.register("chunks:///_virtual/GameManage.ts",["cc"],(function(e){"use strict";var n,t,o,i,a,r,l,s,g,c,u,d,h,p,b,f,y,v,P,C,_,m,B;return{setters:[function(e){n=e.cclegacy,t=e._decorator,o=e.Prefab,i=e.Button,a=e.Node,r=e.AudioSource,l=e.PhysicsSystem2D,s=e.EPhysics2DDrawFlags,g=e.resources,c=e.SpriteFrame,u=e.PageView,d=e.Label,h=e.instantiate,p=e.Sprite,b=e.math,f=e.UITransform,y=e.Layers,v=e.Collider2D,P=e.Contact2DType,C=e.Animation,_=e.v3,m=e.AnimationClip,B=e.Component}],execute:function(){var w,S,x,k,N,z,E,I,O,D,L,T,G,R,F,j,A,V,M,U,J,Z,W,q,H,K,Q;function X(e,n,t,o){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(o):void 0})}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,n,t,o,i){var a={};return Object.keys(o).forEach((function(e){a[e]=o[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,o){return o(e,n,t)||t}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,n,a),a=null),a}function ee(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n._RF.push({},"7beceIqNZpOgbZ6ENP90ZfC","GameManage",void 0);var ne=t.ccclass,te=t.property,oe=function(){ee(this,"distance",0),ee(this,"bookNode",null)};e("GameManage",(w=ne("GameManage"),S=te({type:o}),x=te({type:o}),k=te({type:o}),N=te({type:o}),z=te({type:o}),E=te({type:i}),I=te({type:i}),O=te({type:i}),D=te({type:i}),L=te({type:a}),T=te({type:r}),G=te({type:r}),w((j=$((F=function(e){var n,t;function o(){for(var n,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return X(Y(n=e.call.apply(e,[this].concat(o))||this),"bookPrefab",j,Y(n)),X(Y(n),"endPrefab",A,Y(n)),X(Y(n),"pagePrefab",V,Y(n)),X(Y(n),"energyPrefab",M,Y(n)),X(Y(n),"infoSpritePrefab",U,Y(n)),X(Y(n),"upBtn",J,Y(n)),X(Y(n),"downBtn",Z,Y(n)),X(Y(n),"infoBtn",W,Y(n)),X(Y(n),"soundBtn",q,Y(n)),X(Y(n),"infoContent",H,Y(n)),X(Y(n),"audiobg",K,Y(n)),X(Y(n),"audiouse",Q,Y(n)),ee(Y(n),"_bg1",null),ee(Y(n),"_bg2",null),ee(Y(n),"_bg3",null),ee(Y(n),"_role",null),ee(Y(n),"_bookSpace",800),ee(Y(n),"_books",new Array),ee(Y(n),"_destoryList",new Array),ee(Y(n),"_level",1),ee(Y(n),"_pageView",null),ee(Y(n),"_pageSF",null),ee(Y(n),"_baseString",""),ee(Y(n),"_contentString",new Array),ee(Y(n),"_shine",null),n}t=e,(n=o).prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t;var i=o.prototype;return i.onLoad=function(){var e=this;l.instance.enable=!0,l.instance.debugDrawFlags=s.Aabb|s.Pair|s.CenterOfMass|s.Joint|s.Shape,g.load("default_panel/spriteFrame",c,(function(n,t){e._pageSF=t}))},i.loadJson=function(){var e=this;g.load("resum",(function(n,t){console.log("load");for(var o="",i=0;i<t.json.base.length;i++)o+=t.json.base[i],o+="\n";e._baseString=o;for(var a=0;a<t.json.content.length;a++){for(var r="",l=0;l<t.json.content[a].length;l++)r+=t.json.content[a][l],r+="\n";e._contentString.push(r)}e.setPageContent(0,e._baseString),e.GenerateBook(e._contentString.length)}))},i.setPageContent=function(e,n){var t,o=this._pageView.getComponent(u),i=o.getPages();if(e>=i.length)for(var a=e+1-i.length,r=0;r<a;r++)o.addPage(this.createPage());(null===(t=(i=o.getPages())[e].getChildByName("Label"))||void 0===t?void 0:t.getComponent(d)).string=n,this.showUpDownBtn(o)},i.createPage=function(){return h(this.pagePrefab)},i.addPage=function(){console.log("addPage");var e=this._pageView.getComponent(u),n=e.getPages();console.log(n);var t=new a("test"),o=t.addComponent(p);o.color=b.color(0,0,255,255),o.type=1,console.log(this._pageSF),o.spriteFrame=this._pageSF,t.getComponent(f).contentSize=b.size(500,300),t.layer=y.Enum.UI_2D,e.addPage(t);var i=e.getPages();console.log(i)},i.start=function(){this._bg1=this.node.getChildByName("BG1"),this._bg2=this.node.getChildByName("BG2"),this._bg3=this.node.getChildByName("BG3"),this._role=this.node.getChildByName("Role"),this._pageView=this.node.getChildByPath("Role/Camera/Info/InfoContent/PageView"),this._shine=this.node.getChildByPath("Role/Camera/Info/shine"),console.log("game manager start...");var e=this._role.getComponent(v);console.log(e),e&&(e.on(P.BEGIN_CONTACT,this.onBeginContact,this),e.on(P.END_CONTACT,this.onEndContact,this),e.on(P.PRE_SOLVE,this.onPreSolve,this),e.on(P.POST_SOLVE,this.onPostSolve,this)),this.loadJson(),this.upBtn.node.active=!1,this.downBtn.node.active=!1},i.generateEnergy=function(e){var n=this;console.log(">>generateEnergy<<");var t=new a,o=h(this.energyPrefab);o.getComponent(C).once(C.EventType.STOP,(function(){var e;console.log("energyNode >>>>>>>> animation stop"),console.log(o),null==o||null===(e=o.parent)||void 0===e||e.destroy(),n.infoBtn.node.getComponent(C).play("rock")}),o),this.node.addChild(t),t.addComponent(f).priority=1;var i=_(0,0,0);i.x=e.x,t.setPosition(i),t.addChild(o)},i.showInfoSprite=function(e,n){console.log(">>showInfoSprite<<");var t=new a,o=h(this.infoSpritePrefab);o.getChildByName("Label").getComponent(d).string=n,this.node.addChild(t),t.addComponent(f).priority=0;var i=_(0,0,0);i.x=e.x,t.setPosition(i),t.addChild(o)},i.onBeginContact=function(e,n,t){console.log("onBeginContact"),console.log(e.node.name),console.log(n.node.name),"Role"!=n.node.name&&this._destoryList.push(n.node)},i.onEndContact=function(e,n,t){console.log("onEndContact")},i.onPreSolve=function(e,n,t){console.log("onPreSolve")},i.onPostSolve=function(e,n,t){console.log("onPostSolve")},i.update=function(e){this.ChangeBG(),this.DestroyNode()},i.DestroyNode=function(){var e=this;if(this._destoryList.length>0){for(var n=0;n<this._destoryList.length;n++){var t=this._destoryList[n].getParent(),o=_();null==t||t.getPosition(o),null==t||t.destroy();var i=this._level;this._level++,this.setPageContent(i,this._contentString[i-1]),o.x+=30,this.generateEnergy(o),o.x+=80,this.showInfoSprite(o,this._contentString[i-1]),this._level==this._contentString.length+1&&this.scheduleOnce((function(){e._shine.active=!0}),1),this.audiouse.play()}this._destoryList.splice(0,this._destoryList.length)}},i.ChangeBG=function(){var e=this._bg1.getComponent(f).getBoundingBox(),n=this._bg2.getComponent(f).getBoundingBox(),t=this._bg3.getComponent(f).getBoundingBox(),o=this._role.getComponent(f).getBoundingBox(),i=_(),a=_(),r=_();this._bg1.getPosition(i),this._bg2.getPosition(a),this._bg3.getPosition(r),e.containsRect(o)?(r.x!=i.x-2048&&(r.x=i.x-2048,this._bg3.setPosition(r)),a.x!=i.x+2048&&(a.x=i.x+2048,this._bg2.setPosition(a))):n.containsRect(o)?(i.x!=a.x-2048&&(i.x=a.x-2048,this._bg1.setPosition(i)),r.x!=a.x+2048&&(r.x=a.x+2048,this._bg3.setPosition(r))):t.containsRect(o)&&(a.x!=r.x-2048&&(a.x=r.x-2048,this._bg2.setPosition(a)),i.x!=r.x+2048&&(i.x=r.x+2048,this._bg1.setPosition(i)))},i.GenerateBook=function(e){for(var n=0;n<e;n++){var t=new oe;t.distance=this._bookSpace*(n+1),t.bookNode=new a("bookNode");var o=h(this.bookPrefab);t.bookNode.addChild(o),t.bookNode.addComponent(f).priority=0,this.node.addChild(t.bookNode),t.bookNode.setPosition(_(t.distance,0,0)),this._books.push(t)}var i=h(this.endPrefab),r=new a("EndNode"),l=this._bookSpace*e+500;r.addChild(i),r.addComponent(f).priority=0,r.setPosition(_(l,0,0)),this.node.addChild(r)},i.onClickInfoBtn=function(e,n){console.log("click infobtn........"),this.infoContent.active=!0;var t=this.infoContent.getComponent(C),o=t.getState("infoon");console.log(o),o.wrapMode=m.WrapMode.Normal,t.play("infoon")},i.onClickUpBtn=function(e,n){console.log("click upbtn........");var t=this._pageView.getComponent(u),o=(t.getPages(),t.curPageIdx);o>0&&t.scrollToPage(o-1)},i.onClickDownBtn=function(e,n){console.log("click downbtn........");var t=this._pageView.getComponent(u),o=t.getPages(),i=t.curPageIdx;i<o.length-1&&t.scrollToPage(i+1)},i.onClickCloseBtn=function(e,n){console.log("click closebtn........");var t=this.infoContent.getComponent(C);t.getState("infoon").wrapMode=m.WrapMode.Reverse,t.play("infoon"),t.once(C.EventType.STOP,(function(){console.log("closebtn >>>>>>>> active false")}))},i.onClickSoundBtn=function(e,n){this.audiobg.playing?(this.audiobg.pause(),this.soundBtn.node.getChildByName("Sprite").active=!0):(this.audiobg.play(),this.soundBtn.node.getChildByName("Sprite").active=!1)},i.onPageEvent=function(e,n,t){console.log("onPageEvent"),this.showUpDownBtn(e)},i.showUpDownBtn=function(e){var n=e.getPages();n.length>1?(this.upBtn.node.active=!0,this.downBtn.node.active=!0,0==e.curPageIdx&&(console.log(this.upBtn),this.upBtn.node.active=!1),e.curPageIdx==n.length-1&&(console.log(this.downBtn),this.downBtn.node.active=!1)):(this.upBtn.node.active=!1,this.downBtn.node.active=!1)},o}(B)).prototype,"bookPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=$(F.prototype,"endPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=$(F.prototype,"pagePrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=$(F.prototype,"energyPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=$(F.prototype,"infoSpritePrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=$(F.prototype,"upBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=$(F.prototype,"downBtn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=$(F.prototype,"infoBtn",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=$(F.prototype,"soundBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=$(F.prototype,"infoContent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=$(F.prototype,"audiobg",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=$(F.prototype,"audiouse",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=F))||R));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerControl.ts",["cc"],(function(e){"use strict";var t,i,r,n,o,s,a,c,l,u,h;return{setters:[function(e){t=e.cclegacy,i=e._decorator,r=e.CCInteger,n=e.PhysicsSystem2D,o=e.EPhysics2DDrawFlags,s=e.UITransform,a=e.systemEvent,c=e.SystemEventType,l=e.macro,u=e.v3,h=e.Component}],execute:function(){var d,_,p,y,f,v,m;function S(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function P(e,t,i,r,n){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,r){return r(e,t,i)||i}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t._RF.push({},"8eac7257mVFyoDyySUeVjsM","PlayerControl",void 0);var w=i.ccclass,C=i.property;e("PlayerControl",(d=w("PlayerControl"),_=C({type:r}),p=C({type:r}),d((v=P((f=function(e){var t,i;function r(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return S(b(t=e.call.apply(e,[this].concat(r))||this),"maxSpeed",v,b(t)),S(b(t),"maxWidth",m,b(t)),g(b(t),"_direction",1),g(b(t),"_curSpeed",0),g(b(t),"_speedaddPerSec",500),g(b(t),"_speeddecPerSec",300),g(b(t),"_startMove",!1),g(b(t),"_role",null),g(b(t),"_sprite",null),g(b(t),"_width",0),g(b(t),"_anim",null),t}i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var h=r.prototype;return h.onLoad=function(){n.instance.enable=!0,n.instance.debugDrawFlags=o.Aabb|o.Pair|o.CenterOfMass|o.Joint|o.Controller|o.Shape},h.start=function(){this._role=this.node,console.log("start........."),this._sprite=this.node.getChildByName("Sprite");var e=this._sprite.getComponent(s);this._width=e.width,this._anim=this._sprite.getComponent("cc.Animation"),a.on(c.KEY_DOWN,this.KeyDown,this),a.on(c.KEY_UP,this.KeyUp,this)},h.KeyDown=function(e){this._startMove||(l.KEY.a==e.keyCode&&(this._direction=-1,this._anim.play("role_run_left"),this._startMove=!0),l.KEY.d==e.keyCode&&(this._direction=1,this._anim.play("role_run_right"),this._startMove=!0))},h.KeyUp=function(e){this._startMove&&(l.KEY.a!=e.keyCode&&l.KEY.d!=e.keyCode||(this._startMove=!1))},h.update=function(e){if(0!=this._curSpeed&&(this._curSpeed>0?(this._curSpeed-=this._speeddecPerSec*e,this._curSpeed<0&&(this._curSpeed=0,this._startMove||this._anim.stop())):(this._curSpeed+=this._speeddecPerSec*e,this._curSpeed>0&&(this._curSpeed=0,this._startMove||this._anim.stop()))),this._startMove){var t=u();this._role.getPosition(t),t.x+=this._curSpeed*e,this._role.setPosition(t),1==this._direction&&this._curSpeed<this.maxSpeed||-1==this._direction&&this._curSpeed>this.maxSpeed*this._direction?this._curSpeed+=this._speedaddPerSec*e*this._direction:this._curSpeed=this.maxSpeed*this._direction}else if(0!=this._curSpeed){var i=u();this._role.getPosition(i),i.x+=this._curSpeed*e,this._role.setPosition(i)}},r}(h)).prototype,"maxSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 350}}),m=P(f.prototype,"maxWidth",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1280}}),y=f))||y));t._RF.pop()}}}));

System.register("chunks:///_virtual/Haiou.ts",["cc"],(function(e){"use strict";var i,t,r,n,o,a,u,l,c,s;return{setters:[function(e){i=e.cclegacy,t=e._decorator,r=e.Prefab,n=e.Node,o=e.CCInteger,a=e.macro,u=e.randomRangeInt,l=e.instantiate,c=e.v3,s=e.Component}],execute:function(){var f,p,h,d,b,y,v,g,w,_,m;function P(e,i,t,r){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function S(e,i,t,r,n){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce((function(t,r){return r(e,i,t)||t}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,i,o),o=null),o}i._RF.push({},"f7cfa/IwM1Oe4OAh2c2SriT","Haiou",void 0);var O=t.ccclass,R=t.property;e("Haiou",(f=O("Haiou"),p=R({type:r}),h=R({type:n}),d=R({type:o}),b=R({type:o}),f((g=S((v=function(e){var i,t;function r(){for(var i,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return P(z(i=e.call.apply(e,[this].concat(r))||this),"haiouPrefab",g,z(i)),P(z(i),"role",w,z(i)),P(z(i),"haiouSpeedx",_,z(i)),P(z(i),"haiouSpeedy",m,z(i)),x(z(i),"_nodes",new Array),i}t=e,(i=r).prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t;var o=r.prototype;return o.start=function(){var e=this;this.schedule((function(){e.generateHaiou()}),10,a.REPEAT_FOREVER,5)},o.generateHaiou=function(){for(var e=u(0,100)>25?1:2,i=0;i<e;i++){var t=new n,r=l(this.haiouPrefab),o=(u(0,1e3)%20+20*i)*(u(0,10)>5?1:-1),a=u(0,1e3)%20+20*i,s=c();this.role.getPosition(s),t.setPosition(c(s.x+1100+o,160+a,0)),this.node.addChild(t),t.addChild(r),this._nodes.push(t)}},o.update=function(e){var i=c();this.role.getPosition(i);for(var t=0;t<this._nodes.length;t++){var r=this._nodes[t],n=c();r.getPosition(n),n.x-=e*this.haiouSpeedx,n.x>i.x+200?n.y+=e*this.haiouSpeedy:n.y-=e*this.haiouSpeedy,r.setPosition(n),n.x<i.x-500&&(r.destroy(),this._nodes.splice(t,1),t--)}},r}(s)).prototype,"haiouPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=S(v.prototype,"role",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=S(v.prototype,"haiouSpeedx",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),m=S(v.prototype,"haiouSpeedy",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),y=v))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameManage.ts","./PlayerControl.ts","./Haiou.ts"],(function(){"use strict";return{setters:[function(){},function(){},function(){}],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});